<!DOCTYPE html>
<html lang="en">
<html>
    <head>
        <title>nidhi.g : Voip task tiles</title>
        <link rel="stylesheet" href="style.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">nidhi.g</a></span>
                            </li>
                                                    <li>
                                <span><a href="Overview_1547436107.html">Overview</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            nidhi.g : Voip task tiles
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Nidhi Gajera</span>, last modified on 20 May 2025
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h3 style="margin-left: 180.0px;" id="Voiptasktiles-voice_tiles_states">voice_tiles_states  </h3><div class="table-wrap"><table data-table-width="1102" data-layout="center" data-local-id="a7c5e51d-94f1-4e66-8f5d-b0e93bdc9945" class="confluenceTable"><colgroup><col style="width: 206.0px;"/><col style="width: 74.0px;"/><col style="width: 137.0px;"/><col style="width: 137.0px;"/><col style="width: 137.0px;"/><col style="width: 137.0px;"/><col style="width: 137.0px;"/><col style="width: 137.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p /><p>Tile</p></th><th class="confluenceTh"><p><strong>id</strong></p></th><th class="confluenceTh"><p><strong>type_id</strong></p></th><th class="confluenceTh"><p><strong>type</strong></p></th><th class="confluenceTh"><p><strong>entity</strong></p></th><th class="confluenceTh"><p><strong>entity_id</strong></p></th><th class="confluenceTh"><p><strong>hide_forever</strong></p></th><th class="confluenceTh"><p><strong>snooze_until</strong></p></th></tr><tr><td class="confluenceTd"><p><strong>Update Email Address</strong></p></td><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>null</p></td><td class="confluenceTd"><p>null</p></td><td class="confluenceTd"><p>Patient</p></td><td class="confluenceTd"><p><code>patientId</code></p></td><td class="confluenceTd"><p>true</p></td><td class="confluenceTd"><p>null</p></td></tr><tr><td class="confluenceTd"><p><strong>Update Mobile Phone</strong></p></td><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>null</p></td><td class="confluenceTd"><p>null</p></td><td class="confluenceTd"><p>Patient</p></td><td class="confluenceTd"><p><code>patientId</code></p></td><td class="confluenceTd"><p>true</p></td><td class="confluenceTd"><p>null</p></td></tr><tr><td class="confluenceTd"><p><strong>Update Voice Phone Number</strong></p></td><td class="confluenceTd"><p>3</p></td><td class="confluenceTd"><p>null</p></td><td class="confluenceTd"><p>null</p></td><td class="confluenceTd"><p>Patient</p></td><td class="confluenceTd"><p><code>patientId</code></p></td><td class="confluenceTd"><p>true</p></td><td class="confluenceTd"><p>null</p></td></tr><tr><td class="confluenceTd"><p><strong>Referrals to Book</strong></p></td><td class="confluenceTd"><p>4</p></td><td class="confluenceTd"><p><code>referralId</code></p></td><td class="confluenceTd"><p>referral</p></td><td class="confluenceTd"><p>Patient</p></td><td class="confluenceTd"><p><code>patientId</code></p></td><td class="confluenceTd"><p>false</p></td><td class="confluenceTd"><p><code>datetime</code></p></td></tr><tr><td class="confluenceTd"><p><strong>Unbooked due dates</strong></p></td><td class="confluenceTd"><p>5</p></td><td class="confluenceTd"><p><img class="emoticon emoticon-blue-star" data-emoji-id="2753" data-emoji-shortname=":question:" data-emoji-fallback="❓" src="images/icons/emoticons/72/2753.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)"/> </p></td><td class="confluenceTd"><p><img class="emoticon emoticon-blue-star" data-emoji-id="2753" data-emoji-shortname=":question:" data-emoji-fallback="❓" src="images/icons/emoticons/72/2753.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)"/> </p></td><td class="confluenceTd"><p>Patient</p></td><td class="confluenceTd"><p>patientId</p></td><td class="confluenceTd"><p><img class="emoticon emoticon-blue-star" data-emoji-id="2753" data-emoji-shortname=":question:" data-emoji-fallback="❓" src="images/icons/emoticons/72/2753.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)"/> </p></td><td class="confluenceTd"><p><img class="emoticon emoticon-blue-star" data-emoji-id="2753" data-emoji-shortname=":question:" data-emoji-fallback="❓" src="images/icons/emoticons/72/2753.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)"/> </p></td></tr><tr><td class="confluenceTd"><p><strong>Social review result</strong></p></td><td class="confluenceTd"><p>6</p></td><td class="confluenceTd"><p><code>social_review_id</code></p></td><td class="confluenceTd"><p>social_review</p></td><td class="confluenceTd"><p>Patient</p></td><td class="confluenceTd"><p><code>patientId</code></p></td><td class="confluenceTd"><p>true</p></td><td class="confluenceTd"><p>null</p></td></tr></tbody></table></div><h3 style="margin-left: 180.0px;" id="Voiptasktiles-voice_tiles_states_meta">voice_tiles_states_meta</h3><div class="table-wrap"><table data-table-width="486" data-layout="center" data-local-id="5100c09b-6774-4b93-b918-5ec29b99acd6" class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><strong>voice_tiles_states_id</strong></p></th><th class="confluenceTh"><p><strong>key</strong></p></th><th class="confluenceTh"><p><strong>value</strong></p></th></tr><tr><td class="confluenceTd"><p>1</p></td><td class="confluenceTd"><p>email</p></td><td class="confluenceTd"><p>n@gmaicom</p></td></tr><tr><td class="confluenceTd"><p>2</p></td><td class="confluenceTd"><p>sms</p></td><td class="confluenceTd"><p>7892233333333</p></td></tr><tr><td class="confluenceTd"><p>3</p></td><td class="confluenceTd"><p>phone</p></td><td class="confluenceTd"><p>7892233333333</p></td></tr></tbody></table></div><p> </p><p>For <strong>Update Email Address</strong>, <strong>Update Mobile Phone</strong>, and <strong>Update Voice Phone Number, </strong>we need to follow this logic to display the VOIP Task tile,</p><ol start="1"><li><p>page loads, we fetch snoozed tiles for this patient + the latest contact info used which is already being fetched.</p></li><li><p>If it is not -&gt; Grab contact info from patients table and check if it is different from last contact info.</p></li><li><p>If it is still the same -&gt; check snooze settings/state and hide/display based on that.</p></li><li><p>If it is different -&gt; check if it is in a valid format (e.g. 10 digits for a phone or valid formatting for email. We should have functions for this).</p></li><li><p> If it is valid -&gt; hide tiles.</p></li><li><p>If it is invalid format -&gt; display the tiles regardless of snooze options because it is different contact info but still invalid.</p></li></ol><p><a class="external-link" href="https://app.diagrams.net/#G1Vw_LBW1HSYaBZgP6POcWHRXfBM4xG81g#%7B%22pageId%22%3A%22C5RBs43oDa-KdzZeNtuy%22%7D" rel="nofollow">https://app.diagrams.net/#G1Vw_LBW1HSYaBZgP6POcWHRXfBM4xG81g#{&quot;pageId&quot;%3A&quot;C5RBs43oDa-KdzZeNtuy&quot;}</a></p><p /><h2 id="Voiptasktiles-RevisedlogicduringQA">Revised logic during QA</h2><p>The above logic wouldn’t make any sense, when the patient’s contact info is updated with invalid value again, the only way to find out is the job status with new updated contact details,<br/>Hence, Rely on the Jobs/recalls when it’s available. Use patient’s table otherwise.<br/><br/>1. Check for any failed Jobs/Recalls.</p><p style="margin-left: 30.0px;">If the <code>job </code>is available, use the <code>job-&gt;Email</code> or Job-&gt;PAT_PHONE_NUM to compare with <code>voice_tiles_states_meta</code>table<strong> </strong>to see, if it’s hidden or not.</p><p style="margin-left: 30.0px;">If <code>recalls </code>is available then use <code>patient</code> contact info to compare with <code>voice_tiles_states_meta</code>table to see, if it’s hidden, as <code>recalls </code>table itself doesn’t have any patient contact info.</p><p style="margin-left: 30.0px;">If Recall and job - both are not available then use <code>patient</code> contact info, and validate it, if failed, comapre it with <code>voice_tiles_states_meta</code>table to see, if it’s already hidden. (here, use Twilio Lookup API to validate the phone number <a href="Validation-for-Phone-number_2957246465.html" data-linked-resource-id="2957246465" data-linked-resource-version="2" data-linked-resource-type="page">Validation for Phone number</a> )</p><p style="margin-left: 60.0px;"></p><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on 06 Jun 2025 20:18</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
